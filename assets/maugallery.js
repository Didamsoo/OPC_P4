!function(e){e.fn.mauGallery=function(a){let t=e.extend(e.fn.mauGallery.defaults,a),l=[];return this.each(function(){e.fn.mauGallery.methods.createRowWrapper(e(this)),t.lightBox&&e.fn.mauGallery.methods.createLightBox(e(this),t.lightboxId,t.navigation),e.fn.mauGallery.listeners(t),e(this).children(".gallery-item").each(function(a){e(this).attr("data-index",a),e.fn.mauGallery.methods.responsiveImageItem(e(this)),e.fn.mauGallery.methods.moveItemInRowWrapper(e(this)),e.fn.mauGallery.methods.wrapItemInColumn(e(this),t.columns);let i=e(this).data("gallery-tag");t.showTags&&void 0!==i&&-1===l.indexOf(i)&&l.push(i)}),t.showTags&&e.fn.mauGallery.methods.showItemTags(e(this),t.tagsPosition,l),e(this).fadeIn(150)})},e.fn.mauGallery.defaults={columns:3,lightBox:!0,lightboxId:null,showTags:!0,tagsPosition:"top",navigation:!0},e.fn.mauGallery.listeners=function(a){e(".gallery-item").on("click",function(){a.lightBox&&"IMG"===e(this).prop("tagName")&&e.fn.mauGallery.methods.openLightBox(e(this),a.lightboxId)}),e(".gallery").on("click",".mg-prev",()=>e.fn.mauGallery.methods.prevImage(a.lightboxId)),e(".gallery").on("click",".mg-next",()=>e.fn.mauGallery.methods.nextImage(a.lightboxId)),e(".gallery").on("click",".nav-link",function(a){a.preventDefault(),e.fn.mauGallery.methods.filterByTag(e(this))}),e(".nav-link").on("click",function(){e(".nav-link").removeClass("active-tag"),e(this).addClass("active-tag")})},e.fn.mauGallery.methods={createRowWrapper(e){e.children().first().hasClass("row")||e.append('<div class="gallery-items-row row"></div>')},wrapItemInColumn(e,a){if(a.constructor===Number)e.wrap(`<div class='item-column mb-4 col-${Math.ceil(12/a)}'></div>`);else if(a.constructor===Object){let t="";a.xs&&(t+=` col-${Math.ceil(12/a.xs)}`),a.sm&&(t+=` col-sm-${Math.ceil(12/a.sm)}`),a.md&&(t+=` col-md-${Math.ceil(12/a.md)}`),a.lg&&(t+=` col-lg-${Math.ceil(12/a.lg)}`),a.xl&&(t+=` col-xl-${Math.ceil(12/a.xl)}`),e.wrap(`<div class='item-column mb-4${t}'></div>`)}else console.error(`Columns should be defined as numbers or objects. ${typeof a} is not supported.`)},moveItemInRowWrapper(e){e.appendTo(".gallery-items-row")},responsiveImageItem(e){"IMG"===e.prop("tagName")&&e.addClass("img-fluid")},openLightBox(a,t){let l=e.fn.mauGallery.methods.getVisibleImages(),i=l.index(a);e(`#${t}`).find(".lightboxImage").attr("src",a.attr("src")).attr("data-index",i),e(`#${t}`).modal("toggle")},getVisibleImages:()=>e(".gallery-item:visible"),resetVisibleIndices(){e(".gallery-item:visible").each(function(a){e(this).attr("data-index",a)})},prevImage(a){let t=e(`#${a} .lightboxImage`),l=parseInt(t.attr("data-index"),10),i=e.fn.mauGallery.methods.getVisibleImages(),s=l>0?l-1:i.length-1,n=i.eq(s),o=n.attr("src");t.attr("src",o),t.attr("data-index",s)},nextImage(a){let t=e(`#${a} .lightboxImage`),l=parseInt(t.attr("data-index"),10),i=e.fn.mauGallery.methods.getVisibleImages(),s=l<i.length-1?l+1:0,n=i.eq(s),o=n.attr("src");t.attr("src",o),t.attr("data-index",s)},createLightBox(e,a,t){e.append(`
        <div class="modal fade" id="${a||"galleryLightbox"}" tabindex="-1" role="dialog" aria-hidden="true">
          <div class="modal-dialog" role="document">
            <div class="modal-content">
              <div class="modal-body">
                ${t?'<div class="mg-prev" style="cursor:pointer;position:absolute;top:50%;left:-15px;background:white;"><</div>':'<span style="display:none;" />'}
                <img class="lightboxImage img-fluid" alt="Contenu de l'image affich\xe9e dans la modale au clique"/>
                ${t?'<div class="mg-next" style="cursor:pointer;position:absolute;top:50%;right:-15px;background:white;">></div>':'<span style="display:none;" />'}
              </div>
            </div>
          </div>
        </div>
      `)},showItemTags(a,t,l){let i='<li class="nav-item"><span class="nav-link" data-images-toggle="all">Tous</span></li>';e.each(l,function(e,a){i+=`<li class="nav-item"><span class="nav-link" data-images-toggle="${a}">${a}</span></li>`});let s=`<ul class="my-4 tags-bar nav nav-pills">${i}</ul>`;"bottom"===t?a.append(s):"top"===t?a.prepend(s):console.error(`Unknown tags position: ${t}`)},filterByTag(a){let t=a.data("images-toggle");e(".gallery-item").each(function(){e(this).parents(".item-column").hide(),"all"===t?e(this).parents(".item-column").show(150):e(this).data("gallery-tag")===t&&e(this).parents(".item-column").show(150)}),e.fn.mauGallery.methods.resetVisibleIndices()}}}(jQuery);